!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(e,t,r){
/*!
 * @license twgl.js 4.11.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */
var n;"undefined"!=typeof self&&self,n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/twgl-full.js")}({"./src/attributes.js":
/*!***************************!*\
  !*** ./src/attributes.js ***!
  \***************************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0,t.createAttribsFromArrays=b,t.createBuffersFromArrays=function(e,t){var r={};return Object.keys(t).forEach(function(n){r[n]=v(e,t[n],n)}),t.indices?(r.numElements=t.indices.length,r.elementType=n.getGLTypeForTypedArray(h(t.indices),"indices")):r.numElements=function(e){var t,r;for(r=0;r<y.length&&!((t=y[r])in e);++r);r===y.length&&(t=Object.keys(e)[0]);var n=e[t],i=f(n).length,o=m(n,t),a=i/o;if(i%o>0)throw new Error("numComponents ".concat(o," not correct for length ").concat(i));return a}(t),r},t.createBufferFromArray=v,t.createBufferFromTypedArray=s,t.createBufferInfoFromArrays=function(e,t,r){var i=b(e,t),o=Object.assign({},r||{});o.attribs=Object.assign({},r?r.attribs:{},i);var u=t.indices;if(u){var c=h(u,"indices");o.indices=s(e,c,e.ELEMENT_ARRAY_BUFFER),o.numElements=c.length,o.elementType=n.getGLTypeForTypedArray(c)}else o.numElements||(o.numElements=function(e,t){var r,n;for(n=0;n<y.length&&!((r=y[n])in t)&&!((r=a.attribPrefix+r)in t);++n);n===y.length&&(r=Object.keys(t)[0]);var i=t[r];e.bindBuffer(e.ARRAY_BUFFER,i.buffer);var o=e.getBufferParameter(e.ARRAY_BUFFER,e.BUFFER_SIZE);e.bindBuffer(e.ARRAY_BUFFER,null);var u=function(e,t){return t===e.BYTE?1:t===e.UNSIGNED_BYTE?1:t===e.SHORT?2:t===e.UNSIGNED_SHORT?2:t===e.INT?4:t===e.UNSIGNED_INT?4:t===e.FLOAT?4:0}(e,i.type),s=o/u,c=i.numComponents||i.size,f=s/c;if(f%1!=0)throw new Error("numComponents ".concat(c," not correct for length ").concat(length));return f}(e,o.attribs));return o},t.setAttribInfoBufferFromArray=function(e,t,r,n){r=h(r),void 0!==n?(e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.bufferSubData(e.ARRAY_BUFFER,n,r)):u(e,e.ARRAY_BUFFER,t.buffer,r,t.drawType)},t.setAttributePrefix=function(e){a.attribPrefix=e},t.setAttributeDefaults_=function(e){i.copyExistingProperties(e,a)},t.getNumComponents_=m,t.getArray_=f;var n=o(r(/*! ./typedarrays.js */"./src/typedarrays.js")),i=o(r(/*! ./helper.js */"./src/helper.js"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var a={attribPrefix:""};function u(e,t,r,n,i){e.bindBuffer(t,r),e.bufferData(t,n,i||e.STATIC_DRAW)}function s(e,t,r,n){if(i.isBuffer(e,t))return t;r=r||e.ARRAY_BUFFER;var o=e.createBuffer();return u(e,r,o,t,n),o}function c(e){return"indices"===e}function f(e){return e.length?e:e.data}var l=/coord|texture/i,p=/color|colour/i;function d(e,t){var r;if(t%(r=l.test(e)?2:p.test(e)?4:3)>0)throw new Error("Can not guess numComponents for attribute '".concat(e,"'. Tried ").concat(r," but ").concat(t," values is not evenly divisible by ").concat(r,". You should specify it."));return r}function m(e,t){return e.numComponents||e.size||d(t,f(e).length)}function h(e,t){if(n.isArrayBuffer(e))return e;if(n.isArrayBuffer(e.data))return e.data;Array.isArray(e)&&(e={data:e});var r=e.type;return r||(r=c(t)?Uint16Array:Float32Array),new r(e.data)}function b(e,t){var r={};return Object.keys(t).forEach(function(i){if(!c(i)){var o=t[i],u=o.attrib||o.name||o.attribName||a.attribPrefix+i;if(o.value){if(!Array.isArray(o.value)&&!n.isArrayBuffer(o.value))throw new Error("array.value is not array or typedarray");r[u]={value:o.value}}else{var f,l,p,b;if(o.buffer&&o.buffer instanceof WebGLBuffer)f=o.buffer,b=o.numComponents||o.size,l=o.type,p=o.normalize;else if("number"==typeof o||"number"==typeof o.data){var y=o.data||o,v=o.type||Float32Array,E=y*v.BYTES_PER_ELEMENT;l=n.getGLTypeForTypedArrayType(v),p=void 0!==o.normalize?o.normalize:(_=v)===Int8Array||_===Uint8Array,b=o.numComponents||o.size||d(i,y),f=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,f),e.bufferData(e.ARRAY_BUFFER,E,o.drawType||e.STATIC_DRAW)}else{var g=h(o,i);f=s(e,g,void 0,o.drawType),l=n.getGLTypeForTypedArray(g),p=void 0!==o.normalize?o.normalize:function(e){return e instanceof Int8Array||e instanceof Uint8Array}(g),b=m(o,i)}r[u]={buffer:f,numComponents:b,type:l,normalize:p,stride:o.stride||0,offset:o.offset||0,divisor:void 0===o.divisor?void 0:o.divisor,drawType:o.drawType}}}var _}),e.bindBuffer(e.ARRAY_BUFFER,null),r}var y=["position","positions","a_position"];function v(e,t,r){var n="indices"===r?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;return s(e,h(t,r),n)}},"./src/draw.js":
/*!*********************!*\
  !*** ./src/draw.js ***!
  \*********************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0,t.drawBufferInfo=i,t.drawObjectList=function(e,t){var r=null,o=null;t.forEach(function(t){if(!1!==t.active){var a=t.programInfo,u=t.vertexArrayInfo||t.bufferInfo,s=!1,c=void 0===t.type?e.TRIANGLES:t.type;a!==r&&(r=a,e.useProgram(a.program),s=!0),(s||u!==o)&&(o&&o.vertexArrayObject&&!u.vertexArrayObject&&e.bindVertexArray(null),o=u,n.setBuffersAndAttributes(e,a,u)),n.setUniforms(a,t.uniforms),i(e,u,c,t.count,t.offset,t.instanceCount)}}),o.vertexArrayObject&&e.bindVertexArray(null)};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(/*! ./programs.js */"./src/programs.js"));function i(e,t,r,n,i,o){r=void 0===r?e.TRIANGLES:r;var a=t.indices,u=t.elementType,s=void 0===n?t.numElements:n;i=void 0===i?0:i,u||a?void 0!==o?e.drawElementsInstanced(r,s,void 0===u?e.UNSIGNED_SHORT:t.elementType,i,o):e.drawElements(r,s,void 0===u?e.UNSIGNED_SHORT:t.elementType,i):void 0!==o?e.drawArraysInstanced(r,i,s,o):e.drawArrays(r,i,s)}},"./src/framebuffers.js":
/*!*****************************!*\
  !*** ./src/framebuffers.js ***!
  \*****************************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0,t.bindFramebufferInfo=function(e,t,r){r=r||e.FRAMEBUFFER,t?(e.bindFramebuffer(r,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(r,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))},t.createFramebufferInfo=function(e,t,r,o){var f=e.FRAMEBUFFER,l=e.createFramebuffer();e.bindFramebuffer(f,l),r=r||e.drawingBufferWidth,o=o||e.drawingBufferHeight;var p=0,d={framebuffer:l,attachments:[],width:r,height:o};return(t=t||u).forEach(function(t){var u=t.attachment,l=t.format,m=function(e){return s[e]}(l);if(m||(m=a+p++),!u)if(function(e){return c[e]}(l))u=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,u),e.renderbufferStorage(e.RENDERBUFFER,l,r,o);else{var h=Object.assign({},t);h.width=r,h.height=o,void 0===h.auto&&(h.auto=!1,h.min=h.min||h.minMag||e.LINEAR,h.mag=h.mag||h.minMag||e.LINEAR,h.wrapS=h.wrapS||h.wrap||e.CLAMP_TO_EDGE,h.wrapT=h.wrapT||h.wrap||e.CLAMP_TO_EDGE),u=n.createTexture(e,h)}if(i.isRenderbuffer(e,u))e.framebufferRenderbuffer(f,m,e.RENDERBUFFER,u);else{if(!i.isTexture(e,u))throw new Error("unknown attachment type");void 0!==t.layer?e.framebufferTextureLayer(f,m,u,t.level||0,t.layer):e.framebufferTexture2D(f,m,t.texTarget||e.TEXTURE_2D,u,t.level||0)}d.attachments.push(u)}),d},t.resizeFramebufferInfo=function(e,t,r,o,a){o=o||e.drawingBufferWidth,a=a||e.drawingBufferHeight,t.width=o,t.height=a,(r=r||u).forEach(function(r,u){var s=t.attachments[u],c=r.format;if(i.isRenderbuffer(e,s))e.bindRenderbuffer(e.RENDERBUFFER,s),e.renderbufferStorage(e.RENDERBUFFER,c,o,a);else{if(!i.isTexture(e,s))throw new Error("unknown attachment type");n.resizeTexture(e,s,r,o,a)}})};var n=o(r(/*! ./textures.js */"./src/textures.js")),i=o(r(/*! ./helper.js */"./src/helper.js"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var a=36064,u=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],s={34041:33306,6401:36128,36168:36128,6402:36096,33189:36096},c={32854:!0,32855:!0,36194:!0,34041:!0,33189:!0,6401:!0,36168:!0}},"./src/helper.js":
/*!***********************!*\
  !*** ./src/helper.js ***!
  \***********************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0,t.copyExistingProperties=function(e,t){Object.keys(t).forEach(function(r){t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&(t[r]=e[r])})},t.copyNamedProperties=function(e,t,r){e.forEach(function(e){var n=t[e];void 0!==n&&(r[e]=n)})},t.isBuffer=function(e,t){return"undefined"!=typeof WebGLBuffer&&t instanceof WebGLBuffer},t.isRenderbuffer=function(e,t){return"undefined"!=typeof WebGLRenderbuffer&&t instanceof WebGLRenderbuffer},t.isShader=function(e,t){return"undefined"!=typeof WebGLShader&&t instanceof WebGLShader},t.isTexture=function(e,t){return"undefined"!=typeof WebGLTexture&&t instanceof WebGLTexture},t.isSampler=function(e,t){return"undefined"!=typeof WebGLSampler&&t instanceof WebGLSampler},t.warn=t.error=void 0;var n="undefined"!=typeof console&&console.error&&"function"==typeof console.error?console.error.bind(console):function(){};t.error=n;var i="undefined"!=typeof console&&console.warn&&"function"==typeof console.warn?console.warn.bind(console):function(){};t.warn=i},"./src/m4.js":
/*!*******************!*\
  !*** ./src/m4.js ***!
  \*******************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0,t.axisRotate=function(e,t,r,n){n=n||new i(16);var o=t[0],a=t[1],u=t[2],s=Math.sqrt(o*o+a*a+u*u),c=(o/=s)*o,f=(a/=s)*a,l=(u/=s)*u,p=Math.cos(r),d=Math.sin(r),m=1-p,h=c+(1-c)*p,b=o*a*m+u*d,y=o*u*m-a*d,v=o*a*m-u*d,E=f+(1-f)*p,g=a*u*m+o*d,_=o*u*m+a*d,x=a*u*m-o*d,A=l+(1-l)*p,T=e[0],R=e[1],P=e[2],F=e[3],w=e[4],O=e[5],L=e[6],I=e[7],B=e[8],C=e[9],S=e[10],U=e[11];return n[0]=h*T+b*w+y*B,n[1]=h*R+b*O+y*C,n[2]=h*P+b*L+y*S,n[3]=h*F+b*I+y*U,n[4]=v*T+E*w+g*B,n[5]=v*R+E*O+g*C,n[6]=v*P+E*L+g*S,n[7]=v*F+E*I+g*U,n[8]=_*T+x*w+A*B,n[9]=_*R+x*O+A*C,n[10]=_*P+x*L+A*S,n[11]=_*F+x*I+A*U,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},t.axisRotation=function(e,t,r){r=r||new i(16);var n=e[0],o=e[1],a=e[2],u=Math.sqrt(n*n+o*o+a*a),s=(n/=u)*n,c=(o/=u)*o,f=(a/=u)*a,l=Math.cos(t),p=Math.sin(t),d=1-l;return r[0]=s+(1-s)*l,r[1]=n*o*d+a*p,r[2]=n*a*d-o*p,r[3]=0,r[4]=n*o*d-a*p,r[5]=c+(1-c)*l,r[6]=o*a*d+n*p,r[7]=0,r[8]=n*a*d+o*p,r[9]=o*a*d-n*p,r[10]=f+(1-f)*l,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},t.copy=s,t.frustum=function(e,t,r,n,o,a,u){u=u||new i(16);var s=t-e,c=n-r,f=o-a;return u[0]=2*o/s,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*o/c,u[6]=0,u[7]=0,u[8]=(e+t)/s,u[9]=(n+r)/c,u[10]=a/f,u[11]=-1,u[12]=0,u[13]=0,u[14]=o*a/f,u[15]=0,u},t.getAxis=function(e,t,r){r=r||n.create();var i=4*t;return r[0]=e[i+0],r[1]=e[i+1],r[2]=e[i+2],r},t.getTranslation=function(e,t){return(t=t||n.create())[0]=e[12],t[1]=e[13],t[2]=e[14],t},t.identity=c,t.inverse=f,t.lookAt=function(e,t,r,s){s=s||new i(16);var c=o,f=a,l=u;return n.normalize(n.subtract(e,t,l),l),n.normalize(n.cross(r,l,c),c),n.normalize(n.cross(l,c,f),f),s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=0,s[4]=f[0],s[5]=f[1],s[6]=f[2],s[7]=0,s[8]=l[0],s[9]=l[1],s[10]=l[2],s[11]=0,s[12]=e[0],s[13]=e[1],s[14]=e[2],s[15]=1,s},t.multiply=function(e,t,r){r=r||new i(16);var n=e[0],o=e[1],a=e[2],u=e[3],s=e[4],c=e[5],f=e[6],l=e[7],p=e[8],d=e[9],m=e[10],h=e[11],b=e[12],y=e[13],v=e[14],E=e[15],g=t[0],_=t[1],x=t[2],A=t[3],T=t[4],R=t[5],P=t[6],F=t[7],w=t[8],O=t[9],L=t[10],I=t[11],B=t[12],C=t[13],S=t[14],U=t[15];return r[0]=n*g+s*_+p*x+b*A,r[1]=o*g+c*_+d*x+y*A,r[2]=a*g+f*_+m*x+v*A,r[3]=u*g+l*_+h*x+E*A,r[4]=n*T+s*R+p*P+b*F,r[5]=o*T+c*R+d*P+y*F,r[6]=a*T+f*R+m*P+v*F,r[7]=u*T+l*R+h*P+E*F,r[8]=n*w+s*O+p*L+b*I,r[9]=o*w+c*O+d*L+y*I,r[10]=a*w+f*O+m*L+v*I,r[11]=u*w+l*O+h*L+E*I,r[12]=n*B+s*C+p*S+b*U,r[13]=o*B+c*C+d*S+y*U,r[14]=a*B+f*C+m*S+v*U,r[15]=u*B+l*C+h*S+E*U,r},t.negate=function(e,t){return(t=t||new i(16))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},t.ortho=function(e,t,r,n,o,a,u){return(u=u||new i(16))[0]=2/(t-e),u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2/(n-r),u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2/(o-a),u[11]=0,u[12]=(t+e)/(e-t),u[13]=(n+r)/(r-n),u[14]=(a+o)/(o-a),u[15]=1,u},t.perspective=function(e,t,r,n,o){o=o||new i(16);var a=Math.tan(.5*Math.PI-.5*e),u=1/(r-n);return o[0]=a/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(r+n)*u,o[11]=-1,o[12]=0,o[13]=0,o[14]=r*n*u*2,o[15]=0,o},t.rotateX=function(e,t,r){r=r||new i(16);var n=e[4],o=e[5],a=e[6],u=e[7],s=e[8],c=e[9],f=e[10],l=e[11],p=Math.cos(t),d=Math.sin(t);return r[4]=p*n+d*s,r[5]=p*o+d*c,r[6]=p*a+d*f,r[7]=p*u+d*l,r[8]=p*s-d*n,r[9]=p*c-d*o,r[10]=p*f-d*a,r[11]=p*l-d*u,e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},t.rotateY=function(e,t,r){r=r||new i(16);var n=e[0],o=e[1],a=e[2],u=e[3],s=e[8],c=e[9],f=e[10],l=e[11],p=Math.cos(t),d=Math.sin(t);return r[0]=p*n-d*s,r[1]=p*o-d*c,r[2]=p*a-d*f,r[3]=p*u-d*l,r[8]=p*s+d*n,r[9]=p*c+d*o,r[10]=p*f+d*a,r[11]=p*l+d*u,e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},t.rotateZ=function(e,t,r){r=r||new i(16);var n=e[0],o=e[1],a=e[2],u=e[3],s=e[4],c=e[5],f=e[6],l=e[7],p=Math.cos(t),d=Math.sin(t);return r[0]=p*n+d*s,r[1]=p*o+d*c,r[2]=p*a+d*f,r[3]=p*u+d*l,r[4]=p*s-d*n,r[5]=p*c-d*o,r[6]=p*f-d*a,r[7]=p*l-d*u,e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},t.rotationX=function(e,t){t=t||new i(16);var r=Math.cos(e),n=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.rotationY=function(e,t){t=t||new i(16);var r=Math.cos(e),n=Math.sin(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.rotationZ=function(e,t){t=t||new i(16);var r=Math.cos(e),n=Math.sin(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.scale=function(e,t,r){r=r||new i(16);var n=t[0],o=t[1],a=t[2];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=n*e[3],r[4]=o*e[4],r[5]=o*e[5],r[6]=o*e[6],r[7]=o*e[7],r[8]=a*e[8],r[9]=a*e[9],r[10]=a*e[10],r[11]=a*e[11],e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},t.scaling=function(e,t){return(t=t||new i(16))[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.setAxis=function(e,t,r,n){n!==e&&(n=s(e,n));var i=4*r;return n[i+0]=t[0],n[i+1]=t[1],n[i+2]=t[2],n},t.setDefaultType=function(e){var t=i;return i=e,t},t.setTranslation=function(e,t,r){return r=r||c(),e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11]),r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},t.transformDirection=function(e,t,r){r=r||n.create();var i=t[0],o=t[1],a=t[2];return r[0]=i*e[0]+o*e[4]+a*e[8],r[1]=i*e[1]+o*e[5]+a*e[9],r[2]=i*e[2]+o*e[6]+a*e[10],r},t.transformNormal=function(e,t,r){r=r||n.create();var i=f(e),o=t[0],a=t[1],u=t[2];return r[0]=o*i[0]+a*i[1]+u*i[2],r[1]=o*i[4]+a*i[5]+u*i[6],r[2]=o*i[8]+a*i[9]+u*i[10],r},t.transformPoint=function(e,t,r){r=r||n.create();var i=t[0],o=t[1],a=t[2],u=i*e[3]+o*e[7]+a*e[11]+e[15];return r[0]=(i*e[0]+o*e[4]+a*e[8]+e[12])/u,r[1]=(i*e[1]+o*e[5]+a*e[9]+e[13])/u,r[2]=(i*e[2]+o*e[6]+a*e[10]+e[14])/u,r},t.translate=function(e,t,r){r=r||new i(16);var n=t[0],o=t[1],a=t[2],u=e[0],s=e[1],c=e[2],f=e[3],l=e[4],p=e[5],d=e[6],m=e[7],h=e[8],b=e[9],y=e[10],v=e[11],E=e[12],g=e[13],_=e[14],x=e[15];return e!==r&&(r[0]=u,r[1]=s,r[2]=c,r[3]=f,r[4]=l,r[5]=p,r[6]=d,r[7]=m,r[8]=h,r[9]=b,r[10]=y,r[11]=v),r[12]=u*n+l*o+h*a+E,r[13]=s*n+p*o+b*a+g,r[14]=c*n+d*o+y*a+_,r[15]=f*n+m*o+v*a+x,r},t.translation=function(e,t){return(t=t||new i(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},t.transpose=function(e,t){var r;if((t=t||new i(16))===e)return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,t;var n=e[0],o=e[1],a=e[2],u=e[3],s=e[4],c=e[5],f=e[6],l=e[7],p=e[8],d=e[9],m=e[10],h=e[11],b=e[12],y=e[13],v=e[14],E=e[15];return t[0]=n,t[1]=s,t[2]=p,t[3]=b,t[4]=o,t[5]=c,t[6]=d,t[7]=y,t[8]=a,t[9]=f,t[10]=m,t[11]=v,t[12]=u,t[13]=l,t[14]=h,t[15]=E,t};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(/*! ./v3.js */"./src/v3.js")),i=Float32Array,o=n.create(),a=n.create(),u=n.create();function s(e,t){return(t=t||new i(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function c(e){return(e=e||new i(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function f(e,t){t=t||new i(16);var r=e[0],n=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],p=e[9],d=e[10],m=e[11],h=e[12],b=e[13],y=e[14],v=e[15],E=d*v,g=y*m,_=c*v,x=y*f,A=c*m,T=d*f,R=o*v,P=y*a,F=o*m,w=d*a,O=o*f,L=c*a,I=l*b,B=h*p,C=u*b,S=h*s,U=u*p,M=l*s,j=r*b,D=h*n,N=r*p,k=l*n,z=r*s,X=u*n,G=E*s+x*p+A*b-(g*s+_*p+T*b),Y=g*n+R*p+w*b-(E*n+P*p+F*b),W=_*n+P*s+O*b-(x*n+R*s+L*b),V=T*n+F*s+L*p-(A*n+w*s+O*p),H=1/(r*G+u*Y+l*W+h*V);return t[0]=H*G,t[1]=H*Y,t[2]=H*W,t[3]=H*V,t[4]=H*(g*u+_*l+T*h-(E*u+x*l+A*h)),t[5]=H*(E*r+P*l+F*h-(g*r+R*l+w*h)),t[6]=H*(x*r+R*u+L*h-(_*r+P*u+O*h)),t[7]=H*(A*r+w*u+O*l-(T*r+F*u+L*l)),t[8]=H*(I*f+S*m+U*v-(B*f+C*m+M*v)),t[9]=H*(B*a+j*m+k*v-(I*a+D*m+N*v)),t[10]=H*(C*a+D*f+z*v-(S*a+j*f+X*v)),t[11]=H*(M*a+N*f+X*m-(U*a+k*f+z*m)),t[12]=H*(C*d+M*y+B*c-(U*y+I*c+S*d)),t[13]=H*(N*y+I*o+D*d-(j*d+k*y+B*o)),t[14]=H*(j*c+X*y+S*o-(z*y+C*o+D*c)),t[15]=H*(z*d+U*o+k*c-(N*c+X*d+M*o)),t}},"./src/primitives.js":
/*!***************************!*\
  !*** ./src/primitives.js ***!
  \***************************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0,t.create3DFVertices=F,t.createAugmentedTypedArray=p,t.createCubeVertices=T,t.createPlaneVertices=_,t.createSphereVertices=x,t.createTruncatedConeVertices=R,t.createXYQuadVertices=g,t.createCresentVertices=w,t.createCylinderVertices=O,t.createTorusVertices=L,t.createDiscVertices=I,t.deindexVertices=function(e){var t=e.indices,r={},n=t.length;return Object.keys(e).filter(d).forEach(function(i){for(var o=e[i],a=o.numComponents,u=p(a,n,o.constructor),s=0;s<n;++s)for(var c=t[s]*a,f=0;f<a;++f)u.push(o[c+f]);r[i]=u}),r},t.flattenNormals=function(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");for(var t=e.normal,r=t.length,n=0;n<r;n+=9){var i=t[n+0],o=t[n+1],a=t[n+2],u=t[n+3],s=t[n+4],c=t[n+5],f=t[n+6],l=t[n+7],p=t[n+8],d=i+u+f,m=o+s+l,h=a+c+p,b=Math.sqrt(d*d+m*m+h*h);d/=b,m/=b,h/=b,t[n+0]=d,t[n+1]=m,t[n+2]=h,t[n+3]=d,t[n+4]=m,t[n+5]=h,t[n+6]=d,t[n+7]=m,t[n+8]=h}return e},t.makeRandomVertexColors=function(e,t){t=t||{};var r=e.position.numElements,n=p(4,r,Uint8Array),i=t.rand||function(e,t){return t<3?(r=256,Math.random()*r|0):255;var r};if(e.color=n,e.indices)for(var o=0;o<r;++o)n.push(i(o,0),i(o,1),i(o,2),i(o,3));else for(var a=t.vertsPerColor||3,u=r/a,s=0;s<u;++s)for(var c=[i(s,0),i(s,1),i(s,2),i(s,3)],f=0;f<a;++f)n.push(c);return e},t.reorientDirections=b,t.reorientNormals=y,t.reorientPositions=v,t.reorientVertices=E,t.concatVertices=function(e){for(var t,r={},n=function(n){var i=e[n];Object.keys(i).forEach(function(e){r[e]||(r[e]=[]),t||"indices"===e||(t=e);var n=i[e],o=f(n,e),a=c(n).length/o;r[e].push(a)})},i=0;i<e.length;++i)n(i);var o=r[t],a={};return Object.keys(r).forEach(function(t){var r=function(t){for(var r,n=0,i=0;i<e.length;++i){var o=e[i][t],a=c(o);n+=a.length,r&&!o.data||(r=o)}return{length:n,spec:r}}(t),n=M(r.spec,r.length);!function(t,r,n){for(var i=0,o=0,a=0;a<e.length;++a){var u=e[a][t],s=c(u);"indices"===t?(U(s,n,o,i),i+=r[a]):U(s,n,o),o+=s.length}}(t,o,c(n)),a[t]=n}),a},t.duplicateVertices=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r],i=c(n),o=M(n,i.length);U(i,c(o),0),t[r]=o}),t},t.createDiscBuffers=t.createDiscBufferInfo=t.createTorusBuffers=t.createTorusBufferInfo=t.createCylinderBuffers=t.createCylinderBufferInfo=t.createCresentBuffers=t.createCresentBufferInfo=t.createXYQuadBuffers=t.createXYQuadBufferInfo=t.createTruncatedConeBuffers=t.createTruncatedConeBufferInfo=t.createSphereBuffers=t.createSphereBufferInfo=t.createPlaneBuffers=t.createPlaneBufferInfo=t.createCubeBuffers=t.createCubeBufferInfo=t.create3DFBuffers=t.create3DFBufferInfo=void 0;var n=s(r(/*! ./attributes.js */"./src/attributes.js")),i=s(r(/*! ./helper.js */"./src/helper.js")),o=s(r(/*! ./typedarrays.js */"./src/typedarrays.js")),a=s(r(/*! ./m4.js */"./src/m4.js")),u=s(r(/*! ./v3.js */"./src/v3.js"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var c=n.getArray_,f=n.getNumComponents_;function l(e,t){var r=0;return e.push=function(){for(var t=0;t<arguments.length;++t){var n=arguments[t];if(n instanceof Array||o.isArrayBuffer(n))for(var i=0;i<n.length;++i)e[r++]=n[i];else e[r++]=n}},e.reset=function(e){r=e||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function p(e,t,r){return l(new(r||Float32Array)(e*t),e)}function d(e){return"indices"!==e}function m(e,t,r){for(var n=e.length,i=new Float32Array(3),o=0;o<n;o+=3)r(t,[e[o],e[o+1],e[o+2]],i),e[o]=i[0],e[o+1]=i[1],e[o+2]=i[2]}function h(e,t,r){r=r||u.create();var n=t[0],i=t[1],o=t[2];return r[0]=n*e[0]+i*e[1]+o*e[2],r[1]=n*e[4]+i*e[5]+o*e[6],r[2]=n*e[8]+i*e[9]+o*e[10],r}function b(e,t){return m(e,t,a.transformDirection),e}function y(e,t){return m(e,a.inverse(t),h),e}function v(e,t){return m(e,t,a.transformPoint),e}function E(e,t){return Object.keys(e).forEach(function(r){var n=e[r];r.indexOf("pos")>=0?v(n,t):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?b(n,t):r.indexOf("norm")>=0&&y(n,t)}),e}function g(e,t,r){return e=e||2,{position:{numComponents:2,data:[(t=t||0)+-1*(e*=.5),(r=r||0)+-1*e,t+1*e,r+-1*e,t+-1*e,r+1*e,t+1*e,r+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function _(e,t,r,n,i){e=e||1,t=t||1,r=r||1,n=n||1,i=i||a.identity();for(var o=(r+1)*(n+1),u=p(3,o),s=p(3,o),c=p(2,o),f=0;f<=n;f++)for(var l=0;l<=r;l++){var d=l/r,m=f/n;u.push(e*d-.5*e,0,t*m-.5*t),s.push(0,1,0),c.push(d,m)}for(var h=r+1,b=p(3,r*n*2,Uint16Array),y=0;y<n;y++)for(var v=0;v<r;v++)b.push((y+0)*h+v,(y+1)*h+v,(y+0)*h+v+1),b.push((y+1)*h+v,(y+1)*h+v+1,(y+0)*h+v+1);return E({position:u,normal:s,texcoord:c,indices:b},i)}function x(e,t,r,n,i,o,a){if(t<=0||r<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,o=o||0;for(var u=(i=i||Math.PI)-n,s=(a=a||2*Math.PI)-o,c=(t+1)*(r+1),f=p(3,c),l=p(3,c),d=p(2,c),m=0;m<=r;m++)for(var h=0;h<=t;h++){var b=h/t,y=m/r,v=s*b+o,E=u*y+n,g=Math.sin(v),_=Math.cos(v),x=Math.sin(E),A=_*x,T=Math.cos(E),R=g*x;f.push(e*A,e*T,e*R),l.push(A,T,R),d.push(1-b,y)}for(var P=t+1,F=p(3,t*r*2,Uint16Array),w=0;w<t;w++)for(var O=0;O<r;O++)F.push((O+0)*P+w,(O+0)*P+w+1,(O+1)*P+w),F.push((O+1)*P+w,(O+0)*P+w+1,(O+1)*P+w+1);return{position:f,normal:l,texcoord:d,indices:F}}var A=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function T(e){for(var t=(e=e||1)/2,r=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],i=[[1,0],[0,0],[0,1],[1,1]],o=p(3,24),a=p(3,24),u=p(2,24),s=p(3,12,Uint16Array),c=0;c<6;++c){for(var f=A[c],l=0;l<4;++l){var d=r[f[l]],m=n[c],h=i[l];o.push(d),a.push(m),u.push(h)}var b=4*c;s.push(b+0,b+1,b+2),s.push(b+0,b+2,b+3)}return{position:o,normal:a,texcoord:u,indices:s}}function R(e,t,r,n,i,o,a){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(i<1)throw new Error("verticalSubdivisions must be 1 or greater");for(var u=void 0===o||o,s=void 0===a||a,c=(u?2:0)+(s?2:0),f=(n+1)*(i+1+c),l=p(3,f),d=p(3,f),m=p(2,f),h=p(3,n*(i+c)*2,Uint16Array),b=n+1,y=Math.atan2(e-t,r),v=Math.cos(y),E=Math.sin(y),g=i+(s?2:0),_=u?-2:0;_<=g;++_){var x=_/i,A=r*x,T=void 0;_<0?(A=0,x=1,T=e):_>i?(A=r,x=1,T=t):T=e+_/i*(t-e),-2!==_&&_!==i+2||(T=0,x=0),A-=r/2;for(var R=0;R<b;++R){var P=Math.sin(R*Math.PI*2/n),F=Math.cos(R*Math.PI*2/n);l.push(P*T,A,F*T),d.push(_<0||_>i?0:P*v,_<0?-1:_>i?1:E,_<0||_>i?0:F*v),m.push(R/n,1-x)}}for(var w=0;w<i+c;++w)for(var O=0;O<n;++O)h.push(b*(w+0)+0+O,b*(w+0)+1+O,b*(w+1)+1+O),h.push(b*(w+0)+0+O,b*(w+1)+1+O,b*(w+1)+0+O);return{position:l,normal:d,texcoord:m,indices:h}}function P(e,t){t=t||[];for(var r=[],n=0;n<e.length;n+=4){var i=e[n],o=e.slice(n+1,n+4);o.push.apply(o,t);for(var a=0;a<i;++a)r.push.apply(r,o)}return r}function F(){var e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=P([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=P([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=e.length/3,i={position:p(3,n),texcoord:p(2,n),normal:p(3,n),color:p(4,n,Uint8Array),indices:p(3,n/3,Uint16Array)};i.position.push(e),i.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),i.normal.push(t),i.color.push(r);for(var o=0;o<n;++o)i.indices.push(o);return i}function w(e,t,r,n,i,o,a){if(i<=0)throw new Error("subdivisionDown must be > 0");var s=2,c=(a=a||1)-(o=o||0),f=2*(i+1)*(2+s),l=p(3,f),d=p(3,f),m=p(2,f);function h(e,t,r){return e+(t-e)*r}function b(t,r,a,f,p,b){for(var y=0;y<=i;y++){var v=r/(s-1),E=y/i,g=2*(v-.5),_=(o+E*c)*Math.PI,x=Math.sin(_),A=Math.cos(_),T=h(e,t,x),R=g*n,P=A*e,F=x*T;l.push(R,P,F);var w=u.add(u.multiply([0,x,A],a),f);d.push(w),m.push(v*p+b,E)}}for(var y=0;y<s;y++){var v=2*(y/(s-1)-.5);b(t,y,[1,1,1],[0,0,0],1,0),b(t,y,[0,0,0],[v,0,0],0,0),b(r,y,[1,1,1],[0,0,0],1,0),b(r,y,[0,0,0],[v,0,0],0,1)}var E=p(3,2*i*(2+s),Uint16Array);function g(e,t){for(var r=0;r<i;++r)E.push(e+r+0,e+r+1,t+r+0),E.push(e+r+1,t+r+1,t+r+0)}var _=i+1;return g(0*_,4*_),g(5*_,7*_),g(6*_,2*_),g(3*_,1*_),{position:l,normal:d,texcoord:m,indices:E}}function O(e,t,r,n,i,o){return R(e,e,t,r,n,i,o)}function L(e,t,r,n,i,o){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(n<3)throw new Error("verticalSubdivisions must be 3 or greater");i=i||0;for(var a=(o=o||2*Math.PI)-i,u=r+1,s=n+1,c=u*s,f=p(3,c),l=p(3,c),d=p(2,c),m=p(3,r*n*2,Uint16Array),h=0;h<s;++h)for(var b=h/n,y=b*Math.PI*2,v=Math.sin(y),E=e+v*t,g=Math.cos(y),_=g*t,x=0;x<u;++x){var A=x/r,T=i+A*a,R=Math.sin(T),P=Math.cos(T),F=R*E,w=P*E,O=R*v,L=P*v;f.push(F,_,w),l.push(O,g,L),d.push(A,1-b)}for(var I=0;I<n;++I)for(var B=0;B<r;++B){var C=1+B,S=1+I;m.push(u*I+B,u*S+B,u*I+C),m.push(u*S+B,u*S+C,u*I+C)}return{position:f,normal:l,texcoord:d,indices:m}}function I(e,t,r,n,i){if(t<3)throw new Error("divisions must be at least 3");i=i||1,n=n||0;for(var o=(t+1)*((r=r||1)+1),a=p(3,o),u=p(3,o),s=p(2,o),c=p(3,r*t*2,Uint16Array),f=0,l=e-n,d=t+1,m=0;m<=r;++m){for(var h=n+l*Math.pow(m/r,i),b=0;b<=t;++b){var y=2*Math.PI*b/t,v=h*Math.cos(y),E=h*Math.sin(y);if(a.push(v,0,E),u.push(0,1,0),s.push(1-b/t,m/r),m>0&&b!==t){var g=f+(b+1),_=f+b,x=f+b-d,A=f+(b+1)-d;c.push(g,_,x),c.push(g,x,A)}}f+=t+1}return{position:a,normal:u,texcoord:s,indices:c}}function B(e){return function(t){var r=e.apply(this,Array.prototype.slice.call(arguments,1));return n.createBuffersFromArrays(t,r)}}function C(e){return function(t){var r=e.apply(null,Array.prototype.slice.call(arguments,1));return n.createBufferInfoFromArrays(t,r)}}var S=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function U(e,t,r,n){n=n||0;for(var i=e.length,o=0;o<i;++o)t[r+o]=e[o]+n}function M(e,t){var r=c(e),n=new r.constructor(t),o=n;return r.numComponents&&r.numElements&&l(n,r.numComponents),e.data&&(o={data:n},i.copyNamedProperties(S,e,o)),o}var j=C(F);t.create3DFBufferInfo=j;var D=B(F);t.create3DFBuffers=D;var N=C(T);t.createCubeBufferInfo=N;var k=B(T);t.createCubeBuffers=k;var z=C(_);t.createPlaneBufferInfo=z;var X=B(_);t.createPlaneBuffers=X;var G=C(x);t.createSphereBufferInfo=G;var Y=B(x);t.createSphereBuffers=Y;var W=C(R);t.createTruncatedConeBufferInfo=W;var V=B(R);t.createTruncatedConeBuffers=V;var H=C(g);t.createXYQuadBufferInfo=H;var K=B(g);t.createXYQuadBuffers=K;var q=C(w);t.createCresentBufferInfo=q;var Z=B(w);t.createCresentBuffers=Z;var Q=C(O);t.createCylinderBufferInfo=Q;var J=B(O);t.createCylinderBuffers=J;var $=C(L);t.createTorusBufferInfo=$;var ee=B(L);t.createTorusBuffers=ee;var te=C(I);t.createDiscBufferInfo=te;var re=B(I);t.createDiscBuffers=re},"./src/programs.js":
/*!*************************!*\
  !*** ./src/programs.js ***!
  \*************************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0,t.createAttributeSetters=k,t.createProgram=O,t.createProgramFromScripts=function(e,t,r,n,i){for(var o=R(r,n,i),a=[],u=0;u<t.length;++u){var s=L(e,t[u],e[P[u]],o.errorCallback);if(!s)return null;a.push(s)}return O(e,a,o)},t.createProgramFromSources=I,t.createProgramInfo=function(e,t,r,n,i){var o=R(r,n,i),a=!0;if(t=t.map(function(e){if(e.indexOf("\n")<0){var t=s(e);t?e=t.text:(o.errorCallback("no element with id: "+e),a=!1)}return e}),!a)return null;var u=I(e,t,o);return u?X(e,u):null},t.createProgramInfoFromProgram=X,t.createUniformSetters=C,t.createUniformBlockSpecFromProgram=M,t.createUniformBlockInfoFromProgram=D,t.createUniformBlockInfo=function(e,t,r){return D(e,t.program,t.uniformBlockSpec,r)},t.createTransformFeedback=function(e,t,r){var n=e.createTransformFeedback();return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n),e.useProgram(t.program),U(e,t,r),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),n},t.createTransformFeedbackInfo=S,t.bindTransformFeedbackInfo=U,t.setAttributes=z,t.setBuffersAndAttributes=function(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(z(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indices))},t.setUniforms=function e(t,r){for(var n=t.uniformSetters||t,i=arguments.length,o=1;o<i;++o){var a=arguments[o];if(Array.isArray(a))for(var u=a.length,s=0;s<u;++s)e(n,a[s]);else for(var c in a){var f=n[c];f&&f(a[c])}}},t.setUniformBlock=function(e,t,r){N(e,t,r)&&e.bufferData(e.UNIFORM_BUFFER,r.array,e.DYNAMIC_DRAW)},t.setBlockUniforms=function(e,t){var r=e.uniforms;for(var n in t){var i=r[n];if(i){var o=t[n];o.length?i.set(o):i[0]=o}}},t.bindUniformBlock=N;var n=o(r(/*! ./utils.js */"./src/utils.js")),i=o(r(/*! ./helper.js */"./src/helper.js"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var a=i.error,u=i.warn,s="undefined"!=typeof document&&document.getElementById?document.getElementById.bind(document):function(){return null},c={};function f(e,t){return c[t].bindPoint}function l(e,t){return function(r){e.uniform1i(t,r)}}function p(e,t){return function(r){e.uniform1iv(t,r)}}function d(e,t){return function(r){e.uniform2iv(t,r)}}function m(e,t){return function(r){e.uniform3iv(t,r)}}function h(e,t){return function(r){e.uniform4iv(t,r)}}function b(e,t,r,o){var a=f(0,t);return n.isWebGL2(e)?function(t){var n,u;i.isTexture(e,t)?(n=t,u=null):(n=t.texture,u=t.sampler),e.uniform1i(o,r),e.activeTexture(e.TEXTURE0+r),e.bindTexture(a,n),e.bindSampler(r,u)}:function(t){e.uniform1i(o,r),e.activeTexture(e.TEXTURE0+r),e.bindTexture(a,t)}}function y(e,t,r,o,a){for(var u=f(0,t),s=new Int32Array(a),c=0;c<a;++c)s[c]=r+c;return n.isWebGL2(e)?function(t){e.uniform1iv(o,s),t.forEach(function(t,n){var o,a;e.activeTexture(e.TEXTURE0+s[n]),i.isTexture(e,t)?(o=t,a=null):(o=t.texture,a=t.sampler),e.bindSampler(r,a),e.bindTexture(u,o)})}:function(t){e.uniform1iv(o,s),t.forEach(function(t,r){e.activeTexture(e.TEXTURE0+s[r]),e.bindTexture(u,t)})}}function v(e,t){return function(r){if(r.value)switch(e.disableVertexAttribArray(t),r.value.length){case 4:e.vertexAttrib4fv(t,r.value);break;case 3:e.vertexAttrib3fv(t,r.value);break;case 2:e.vertexAttrib2fv(t,r.value);break;case 1:e.vertexAttrib1fv(t,r.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||e.FLOAT,r.normalize||!1,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function E(e,t){return function(r){if(r.value){if(e.disableVertexAttribArray(t),4!==r.value.length)throw new Error("The length of an integer constant value must be 4!");e.vertexAttrib4iv(t,r.value)}else e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||e.INT,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function g(e,t){return function(r){if(r.value){if(e.disableVertexAttribArray(t),4!==r.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");e.vertexAttrib4uiv(t,r.value)}else e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||e.UNSIGNED_INT,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function _(e,t,r){var n=r.size,i=r.count;return function(r){e.bindBuffer(e.ARRAY_BUFFER,r.buffer);for(var o=r.size||r.numComponents||n,a=o/i,u=r.type||e.FLOAT,s=c[u].size*o,f=r.normalize||!1,l=r.offset||0,p=s/i,d=0;d<i;++d)e.enableVertexAttribArray(t+d),e.vertexAttribPointer(t+d,a,u,f,s,l+p*d),void 0!==r.divisor&&e.vertexAttribDivisor(t+d,r.divisor)}}c[5126]={Type:Float32Array,size:4,setter:function(e,t){return function(r){e.uniform1f(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1fv(t,r)}}},c[35664]={Type:Float32Array,size:8,setter:function(e,t){return function(r){e.uniform2fv(t,r)}}},c[35665]={Type:Float32Array,size:12,setter:function(e,t){return function(r){e.uniform3fv(t,r)}}},c[35666]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniform4fv(t,r)}}},c[5124]={Type:Int32Array,size:4,setter:l,arraySetter:p},c[35667]={Type:Int32Array,size:8,setter:d},c[35668]={Type:Int32Array,size:12,setter:m},c[35669]={Type:Int32Array,size:16,setter:h},c[5125]={Type:Uint32Array,size:4,setter:function(e,t){return function(r){e.uniform1ui(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1uiv(t,r)}}},c[36294]={Type:Uint32Array,size:8,setter:function(e,t){return function(r){e.uniform2uiv(t,r)}}},c[36295]={Type:Uint32Array,size:12,setter:function(e,t){return function(r){e.uniform3uiv(t,r)}}},c[36296]={Type:Uint32Array,size:16,setter:function(e,t){return function(r){e.uniform4uiv(t,r)}}},c[35670]={Type:Uint32Array,size:4,setter:l,arraySetter:p},c[35671]={Type:Uint32Array,size:8,setter:d},c[35672]={Type:Uint32Array,size:12,setter:m},c[35673]={Type:Uint32Array,size:16,setter:h},c[35674]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}}},c[35675]={Type:Float32Array,size:36,setter:function(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}}},c[35676]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}}},c[35685]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}}},c[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}}},c[35687]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}}},c[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}}},c[35689]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}}},c[35690]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}}},c[35678]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:3553},c[35680]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:34067},c[35679]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:32879},c[35682]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:3553},c[36289]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:35866},c[36292]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:35866},c[36293]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:34067},c[36298]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:3553},c[36299]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:32879},c[36300]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:34067},c[36303]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:35866},c[36306]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:3553},c[36307]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:32879},c[36308]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:34067},c[36311]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:35866};var x={};x[5126]={size:4,setter:v},x[35664]={size:8,setter:v},x[35665]={size:12,setter:v},x[35666]={size:16,setter:v},x[5124]={size:4,setter:E},x[35667]={size:8,setter:E},x[35668]={size:12,setter:E},x[35669]={size:16,setter:E},x[5125]={size:4,setter:g},x[36294]={size:8,setter:g},x[36295]={size:12,setter:g},x[36296]={size:16,setter:g},x[35670]={size:4,setter:E},x[35671]={size:8,setter:E},x[35672]={size:12,setter:E},x[35673]={size:16,setter:E},x[35674]={size:4,setter:_,count:2},x[35675]={size:9,setter:_,count:3},x[35676]={size:16,setter:_,count:4};var A=/^[ \t]*\n/;function T(e,t,r,n){var i=n||a,o=e.createShader(r),u=0;if(A.test(t)&&(u=1,t=t.replace(A,"")),e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var s=e.getShaderInfoLog(o);return i(function(e,t){return t=t||0,++t,e.split("\n").map(function(e,r){return r+t+": "+e}).join("\n")}(t,u)+"\n*** Error compiling shader: "+s),e.deleteShader(o),null}return o}function R(e,t,r){var n;if("function"==typeof t&&(r=t,t=void 0),"function"==typeof e)r=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;var i=e;r=i.errorCallback,e=i.attribLocations,n=i.transformFeedbackVaryings}var o={errorCallback:r||a,transformFeedbackVaryings:n};if(e){var u={};Array.isArray(e)?e.forEach(function(e,r){u[e]=t?t[r]:r}):u=e,o.attribLocations=u}return o}var P=["VERTEX_SHADER","FRAGMENT_SHADER"];function F(e,t){return t.indexOf("frag")>=0?e.FRAGMENT_SHADER:t.indexOf("vert")>=0?e.VERTEX_SHADER:void 0}function w(e,t){t.forEach(function(t){e.deleteShader(t)})}function O(e,t,r,n,o){for(var a=R(r,n,o),u=[],c=[],f=0;f<t.length;++f){var l=t[f];if("string"==typeof l){var p=s(l),d=p?p.text:l,m=e[P[f]];p&&p.type&&(m=F(e,p.type)||m),l=T(e,d,m,a.errorCallback),c.push(l)}i.isShader(e,l)&&u.push(l)}if(u.length!==t.length)return a.errorCallback("not enough shaders for program"),w(e,c),null;var h=e.createProgram();u.forEach(function(t){e.attachShader(h,t)}),a.attribLocations&&Object.keys(a.attribLocations).forEach(function(t){e.bindAttribLocation(h,a.attribLocations[t],t)});var b=a.transformFeedbackVaryings;if(b&&(b.attribs&&(b=b.attribs),Array.isArray(b)||(b=Object.keys(b)),e.transformFeedbackVaryings(h,b,a.transformFeedbackMode||e.SEPARATE_ATTRIBS)),e.linkProgram(h),!e.getProgramParameter(h,e.LINK_STATUS)){var y=e.getProgramInfoLog(h);return a.errorCallback("Error in program linking:"+y),e.deleteProgram(h),w(e,c),null}return h}function L(e,t,r,n){var i,o=s(t);if(!o)throw new Error("unknown script element: ".concat(t));i=o.text;var a=r||F(e,o.type);if(!a)throw new Error("unknown shader type");return T(e,i,a,n)}function I(e,t,r,n,i){for(var o=R(r,n,i),a=[],u=0;u<t.length;++u){var s=T(e,t[u],e[P[u]],o.errorCallback);if(!s)return null;a.push(s)}return O(e,a,o)}function B(e){var t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}function C(e,t){var r=0;function n(t,n){var i,o=e.getUniformLocation(t,n.name),a=n.size>1&&"[0]"===n.name.substr(-3),u=n.type,s=c[u];if(!s)throw new Error("unknown type: 0x".concat(u.toString(16)));if(s.bindPoint){var f=r;r+=n.size,i=a?s.arraySetter(e,u,f,o,n.size):s.setter(e,u,f,o,n.size)}else i=s.arraySetter&&a?s.arraySetter(e,o):s.setter(e,o);return i.location=o,i}for(var i={},o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),a=0;a<o;++a){var u=e.getActiveUniform(t,a);if(!B(u)){var s=u.name;"[0]"===s.substr(-3)&&(s=s.substr(0,s.length-3));var f=n(t,u);i[s]=f}}return i}function S(e,t){for(var r={},n=e.getProgramParameter(t,e.TRANSFORM_FEEDBACK_VARYINGS),i=0;i<n;++i){var o=e.getTransformFeedbackVarying(t,i);r[o.name]={index:i,type:o.type,size:o.size}}return r}function U(e,t,r){for(var n in t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),r.attribs&&(r=r.attribs),r){var i=t[n];if(i){var o=r[n];o.offset?e.bindBufferRange(e.TRANSFORM_FEEDBACK_BUFFER,i.index,o.buffer,o.offset,o.size):e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,i.index,o.buffer)}}}function M(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=[],i=[],o=0;o<r;++o){i.push(o),n.push({});var a=e.getActiveUniform(t,o);if(B(a))break;n[o].name=a.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(r){var o=r[0],a=r[1];e.getActiveUniforms(t,i,e[o]).forEach(function(e,t){n[t][a]=e})});for(var u={},s=e.getProgramParameter(t,e.ACTIVE_UNIFORM_BLOCKS),c=0;c<s;++c){var f=e.getActiveUniformBlockName(t,c),l={index:c,usedByVertexShader:e.getActiveUniformBlockParameter(t,c,e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(t,c,e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(t,c,e.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(t,c,e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};l.used=l.usedByVertexSahder||l.usedByFragmentShader,u[f]=l}return{blockSpecs:u,uniformData:n}}var j=/\[\d+\]\.$/;function D(e,t,r,n){var i=r.blockSpecs,o=r.uniformData,a=i[n];if(!a)return u("no uniform block object named:",n),{name:n,uniforms:{}};var s=new ArrayBuffer(a.size),f=e.createBuffer(),l=a.index;e.bindBuffer(e.UNIFORM_BUFFER,f),e.uniformBlockBinding(t,a.index,l);var p=n+".";j.test(p)&&(p=p.replace(j,"."));var d={};return a.uniformIndices.forEach(function(e){var t=o[e],r=c[t.type],n=r.Type,i=t.size*r.size,a=t.name;a.substr(0,p.length)===p&&(a=a.substr(p.length)),d[a]=new n(s,t.offset,i/n.BYTES_PER_ELEMENT)}),{name:n,array:s,asFloat:new Float32Array(s),buffer:f,uniforms:d}}function N(e,t,r){var n=(t.uniformBlockSpec||t).blockSpecs[r.name];if(n){var i=n.index;return e.bindBufferRange(e.UNIFORM_BUFFER,i,r.buffer,r.offset||0,r.array.byteLength),!0}return!1}function k(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<n;++i){var o=e.getActiveAttrib(t,i);if(!B(o)){var a=e.getAttribLocation(t,o.name),u=x[o.type],s=u.setter(e,a,u);s.location=a,r[o.name]=s}}return r}function z(e,t){for(var r in t){var n=e[r];n&&n(t[r])}}function X(e,t){var r={program:t,uniformSetters:C(e,t),attribSetters:k(e,t)};return n.isWebGL2(e)&&(r.uniformBlockSpec=M(e,t),r.transformFeedbackInfo=S(e,t)),r}},"./src/textures.js":
/*!*************************!*\
  !*** ./src/textures.js ***!
  \*************************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0,t.setTextureDefaults_=function(e){o.copyExistingProperties(e,u),e.textureColor&&A(e.textureColor)},t.createSampler=B,t.createSamplers=function(e,t){var r={};return Object.keys(t).forEach(function(n){r[n]=B(e,t[n])}),r},t.setSamplerParameters=I,t.createTexture=K,t.setEmptyTexture=H,t.setTextureFromArray=V,t.loadTextureFromUrl=G,t.setTextureFromElement=j,t.setTextureFilteringForSize=C,t.setTextureParameters=L,t.setDefaultTextureColor=A,t.createTextures=function(e,t,r){r=r||D;var n=0,i=[],o={},a={};function u(){0===n&&setTimeout(function(){r(i.length?i:void 0,o,a)},0)}return Object.keys(t).forEach(function(r){var s,c,f=t[r];("string"==typeof(c=f.src)||Array.isArray(c)&&"string"==typeof c[0])&&(s=function(e,t,o){a[r]=o,--n,e&&i.push(e),u()},++n),o[r]=K(e,f,s)}),u(),o},t.resizeTexture=function(e,t,r,n,i){n=n||r.width,i=i||r.height;var o=r.target||e.TEXTURE_2D;e.bindTexture(o,t);var a,u=r.level||0,c=r.internalFormat||r.format||e.RGBA,f=y(c),l=r.format||f.format,p=r.src;if(a=p&&(s(p)||Array.isArray(p)&&"number"==typeof p[0])?r.type||_(e,p,f.type):r.type||f.type,o===e.TEXTURE_CUBE_MAP)for(var d=0;d<6;++d)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+d,u,c,n,i,0,l,a,null);else e.texImage2D(o,u,c,n,i,0,l,a,null)},t.canGenerateMipmap=E,t.canFilter=g,t.getNumComponentsForFormat=function(e){var t=p[e];if(!t)throw"unknown format: "+e;return t.numColorComponents},t.getBytesPerElementForInternalFormat=b,t.getFormatAndTypeForInternalFormat=y;var n=a(r(/*! ./utils.js */"./src/utils.js")),i=a(r(/*! ./typedarrays.js */"./src/typedarrays.js")),o=a(r(/*! ./helper.js */"./src/helper.js"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var u={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},s=i.isArrayBuffer,c="undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null,f=6407,l=33319,p={},d=p;d[6406]={numColorComponents:1},d[6409]={numColorComponents:1},d[6410]={numColorComponents:2},d[f]={numColorComponents:3},d[6408]={numColorComponents:4},d[6403]={numColorComponents:1},d[36244]={numColorComponents:1},d[l]={numColorComponents:2},d[33320]={numColorComponents:2},d[f]={numColorComponents:3},d[36248]={numColorComponents:3},d[6408]={numColorComponents:4},d[36249]={numColorComponents:4},d[6402]={numColorComponents:1},d[34041]={numColorComponents:2};var m={},h=m;function b(e,t){var r=m[e];if(!r)throw"unknown internal format";var n=r.bytesPerElementMap[t];if(void 0===n)throw"unknown internal format";return n}function y(e){var t=m[e];if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function v(e){return 0==(e&e-1)}function E(e,t,r,i){if(!n.isWebGL2(e))return v(t)&&v(r);var o=m[i];if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function g(e){var t=m[e];if(!t)throw"unknown internal format";return t.textureFilterable}function _(e,t,r){return s(t)?i.getGLTypeForTypedArray(t):r||e.UNSIGNED_BYTE}function x(e,t,r,n,i){if(i%1!=0)throw"can't guess dimensions";if(r||n){if(n){if(!r&&(r=i/n)%1)throw"can't guess dimensions"}else if((n=i/r)%1)throw"can't guess dimensions"}else{var o=Math.sqrt(i/(t===e.TEXTURE_CUBE_MAP?6:1));o%1==0?(r=o,n=o):(r=i,n=1)}return{width:r,height:n}}function A(e){u.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}h[6406]={textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},h[6409]={textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},h[6410]={textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[5121,5131,36193,5126]},h[f]={textureFormat:f,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},h[6408]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},h[33321]={textureFormat:6403,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[5121]},h[36756]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[5120]},h[33325]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[5126,5131]},h[33326]={textureFormat:6403,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[5126]},h[33330]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5121]},h[33329]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5120]},h[33332]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5123]},h[33331]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5122]},h[33334]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},h[33333]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5124]},h[33323]={textureFormat:l,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[5121]},h[36757]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[5120]},h[33327]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[5126,5131]},h[33328]={textureFormat:l,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[5126]},h[33336]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5121]},h[33335]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5120]},h[33338]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5123]},h[33337]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5122]},h[33340]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5125]},h[33339]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5124]},h[32849]={textureFormat:f,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[5121]},h[35905]={textureFormat:f,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5121]},h[36194]={textureFormat:f,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[5121,33635]},h[36758]={textureFormat:f,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5120]},h[35898]={textureFormat:f,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35899]},h[35901]={textureFormat:f,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35902]},h[34843]={textureFormat:f,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[5126,5131]},h[34837]={textureFormat:f,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5126]},h[36221]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5121]},h[36239]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5120]},h[36215]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5123]},h[36233]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5122]},h[36209]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5125]},h[36227]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5124]},h[32856]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},h[35907]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},h[36759]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[5120]},h[32855]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[5121,32820,33640]},h[32854]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[5121,32819]},h[32857]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[33640]},h[34842]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[5126,5131]},h[34836]={textureFormat:6408,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[5126]},h[36220]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5121]},h[36238]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5120]},h[36975]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[33640]},h[36214]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5123]},h[36232]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5122]},h[36226]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5124]},h[36208]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5125]},h[33189]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5123,5125]},h[33190]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},h[36012]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5126]},h[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[34042]},h[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[36269]},Object.keys(h).forEach(function(e){var t=h[e];t.bytesPerElementMap={},t.bytesPerElement.forEach(function(e,r){var n=t.type[r];t.bytesPerElementMap[n]=e})});var T={};function R(e,t){void 0!==t.colorspaceConversion&&(T.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.colorspaceConversion)),void 0!==t.premultiplyAlpha&&(T.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha)),void 0!==t.flipY&&(T.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY))}function P(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,T.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,T.flipY)}function F(e){T.unpackAlignment=e.getParameter(e.UNPACK_ALIGNMENT),n.isWebGL2(e)&&(T.unpackRowLength=e.getParameter(e.UNPACK_ROW_LENGTH),T.unpackImageHeight=e.getParameter(e.UNPACK_IMAGE_HEIGHT),T.unpackSkipPixels=e.getParameter(e.UNPACK_SKIP_PIXELS),T.unpackSkipRows=e.getParameter(e.UNPACK_SKIP_ROWS),T.unpackSkipImages=e.getParameter(e.UNPACK_SKIP_IMAGES))}function w(e){e.pixelStorei(e.UNPACK_ALIGNMENT,T.unpackAlignment),n.isWebGL2(e)&&(e.pixelStorei(e.UNPACK_ROW_LENGTH,T.unpackRowLength),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,T.unpackImageHeight),e.pixelStorei(e.UNPACK_SKIP_PIXELS,T.unpackSkipPixels),e.pixelStorei(e.UNPACK_SKIP_ROWS,T.unpackSkipRows),e.pixelStorei(e.UNPACK_SKIP_IMAGES,T.unpackSkipImages))}function O(e,t,r,n){n.minMag&&(r.call(e,t,e.TEXTURE_MIN_FILTER,n.minMag),r.call(e,t,e.TEXTURE_MAG_FILTER,n.minMag)),n.min&&r.call(e,t,e.TEXTURE_MIN_FILTER,n.min),n.mag&&r.call(e,t,e.TEXTURE_MAG_FILTER,n.mag),n.wrap&&(r.call(e,t,e.TEXTURE_WRAP_S,n.wrap),r.call(e,t,e.TEXTURE_WRAP_T,n.wrap),(t===e.TEXTURE_3D||o.isSampler(e,t))&&r.call(e,t,e.TEXTURE_WRAP_R,n.wrap)),n.wrapR&&r.call(e,t,e.TEXTURE_WRAP_R,n.wrapR),n.wrapS&&r.call(e,t,e.TEXTURE_WRAP_S,n.wrapS),n.wrapT&&r.call(e,t,e.TEXTURE_WRAP_T,n.wrapT),n.minLod&&r.call(e,t,e.TEXTURE_MIN_LOD,n.minLod),n.maxLod&&r.call(e,t,e.TEXTURE_MAX_LOD,n.maxLod),n.baseLevel&&r.call(e,t,e.TEXTURE_BASE_LEVEL,n.baseLevel),n.maxLevel&&r.call(e,t,e.TEXTURE_MAX_LEVEL,n.maxLevel)}function L(e,t,r){var n=r.target||e.TEXTURE_2D;e.bindTexture(n,t),O(e,n,e.texParameteri,r)}function I(e,t,r){O(e,t,e.samplerParameteri,r)}function B(e,t){var r=e.createSampler();return I(e,r,t),r}function C(e,t,r,n,i,o,a){r=r||u.textureOptions,o=o||e.RGBA,a=a||e.UNSIGNED_BYTE;var s=r.target||e.TEXTURE_2D;if(n=n||r.width,i=i||r.height,e.bindTexture(s,t),E(e,n,i,o))e.generateMipmap(s);else{var c=g(o)?e.LINEAR:e.NEAREST;e.texParameteri(s,e.TEXTURE_MIN_FILTER,c),e.texParameteri(s,e.TEXTURE_MAG_FILTER,c),e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}}function S(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function U(e,t){return(t=t||{}).cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function M(e,t){var r=U(e,t).map(function(e,t){return{face:e,ndx:t}});return r.sort(function(e,t){return e.face-t.face}),r}function j(e,t,r,n){var i=(n=n||u.textureOptions).target||e.TEXTURE_2D,o=n.level||0,a=r.width,s=r.height,f=n.internalFormat||n.format||e.RGBA,l=y(f),p=n.format||l.format,d=n.type||l.type;if(R(e,n),e.bindTexture(i,t),i===e.TEXTURE_CUBE_MAP){var m,h,b=r.width,v=r.height;if(b/6===v)m=v,h=[0,0,1,0,2,0,3,0,4,0,5,0];else if(v/6===b)m=b,h=[0,0,0,1,0,2,0,3,0,4,0,5];else if(b/3==v/2)m=b/3,h=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(b/2!=v/3)throw"can't figure out cube map from element: "+(r.src?r.src:r.nodeName);m=b/2,h=[0,0,1,0,0,1,1,1,0,2,1,2]}c?(c.canvas.width=m,c.canvas.height=m,a=m,s=m,M(e,n).forEach(function(t){var n=h[2*t.ndx+0]*m,i=h[2*t.ndx+1]*m;c.drawImage(r,n,i,m,m,0,0,m,m),e.texImage2D(t.face,o,f,p,d,c.canvas)}),c.canvas.width=1,c.canvas.height=1):"undefined"!=typeof createImageBitmap&&(a=m,s=m,M(e,n).forEach(function(u){var c=h[2*u.ndx+0]*m,l=h[2*u.ndx+1]*m;e.texImage2D(u.face,o,f,m,m,0,p,d,null),createImageBitmap(r,c,l,m,m,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(r){R(e,n),e.bindTexture(i,t),e.texImage2D(u.face,o,f,p,d,r),P(e,n),S(n)&&C(e,t,n,a,s,f,d)})}))}else if(i===e.TEXTURE_3D||i===e.TEXTURE_2D_ARRAY){var E=Math.min(r.width,r.height),g=Math.max(r.width,r.height),_=g/E;if(_%1!=0)throw"can not compute 3D dimensions of element";var x=r.width===g?1:0,A=r.height===g?1:0;F(e),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.pixelStorei(e.UNPACK_ROW_LENGTH,r.width),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(e.UNPACK_SKIP_IMAGES,0),e.texImage3D(i,o,f,E,E,E,0,p,d,null);for(var T=0;T<_;++T){var O=T*E*x,I=T*E*A;e.pixelStorei(e.UNPACK_SKIP_PIXELS,O),e.pixelStorei(e.UNPACK_SKIP_ROWS,I),e.texSubImage3D(i,o,0,0,T,E,E,1,p,d,r)}w(e)}else e.texImage2D(i,o,f,p,d,r);P(e,n),S(n)&&C(e,t,n,a,s,f,d),L(e,t,n)}function D(){}function N(e,t){return void 0!==t||function(e){if("undefined"!=typeof document){var t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}var r=new URL(location.href).origin;return new URL(e,location.href).origin===r}(e)?t:"anonymous"}function k(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof ImageData&&e instanceof ImageData||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}function z(e,t,r){return k(e)?(setTimeout(function(){r(null,e)}),e):function(e,t,r){var n;if(r=r||D,t=void 0!==t?t:u.crossOrigin,t=N(e,t),"undefined"!=typeof Image){n=new Image,void 0!==t&&(n.crossOrigin=t);var i=function(){n.removeEventListener("error",a),n.removeEventListener("load",s),n=null},a=function(){var t="couldn't load image: "+e;o.error(t),r(t,n),i()},s=function(){r(null,n),i()};return n.addEventListener("error",a),n.addEventListener("load",s),n.src=e,n}if("undefined"!=typeof ImageBitmap){var c,f,l=function(){r(c,f)},p={};t&&(p.mode="cors"),fetch(e,p).then(function(e){if(!e.ok)throw e;return e.blob()}).then(function(e){return createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(e){f=e,setTimeout(l)}).catch(function(e){c=e,setTimeout(l)}),n=null}return n}(e,t,r)}function X(e,t,r){var n=(r=r||u.textureOptions).target||e.TEXTURE_2D;if(e.bindTexture(n,t),!1!==r.color){var i=function(e){return e=e||u.textureColor,s(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}(r.color);if(n===e.TEXTURE_CUBE_MAP)for(var o=0;o<6;++o)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);else n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i):e.texImage2D(n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i)}}function G(e,t,r,n){return n=n||D,r=r||u.textureOptions,X(e,t,r),z((r=Object.assign({},r)).src,r.crossOrigin,function(i,o){i?n(i,t,o):(j(e,t,o,r),n(null,t,o))})}function Y(e,t,r,n){n=n||D;var i=r.src;if(6!==i.length)throw"there must be 6 urls for a cubemap";var o=r.level||0,a=r.internalFormat||r.format||e.RGBA,u=y(a),s=r.format||u.format,c=r.type||e.UNSIGNED_BYTE,f=r.target||e.TEXTURE_2D;if(f!==e.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";X(e,t,r),r=Object.assign({},r);var l,p=6,d=[],m=U(e,r);l=i.map(function(i,u){return z(i,r.crossOrigin,(h=m[u],function(i,u){--p,i?d.push(i):u.width!==u.height?d.push("cubemap face img is not a square: "+u.src):(R(e,r),e.bindTexture(f,t),5===p?U(e).forEach(function(t){e.texImage2D(t,o,a,s,c,u)}):e.texImage2D(h,o,a,s,c,u),P(e,r),S(r)&&e.generateMipmap(f)),0===p&&n(d.length?d:void 0,t,l)}));var h})}function W(e,t,r,n){n=n||D;var i=r.src,o=r.internalFormat||r.format||e.RGBA,a=y(o),u=r.format||a.format,s=r.type||e.UNSIGNED_BYTE,f=r.target||e.TEXTURE_2D_ARRAY;if(f!==e.TEXTURE_3D&&f!==e.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";X(e,t,r),r=Object.assign({},r);var l,p=i.length,d=[],m=r.level||0,h=r.width,b=r.height,v=i.length,E=!0;l=i.map(function(i,a){return z(i,r.crossOrigin,(y=a,function(i,a){if(--p,i)d.push(i);else{if(R(e,r),e.bindTexture(f,t),E){E=!1,h=r.width||a.width,b=r.height||a.height,e.texImage3D(f,m,o,h,b,v,0,u,s,null);for(var g=0;g<v;++g)e.texSubImage3D(f,m,0,0,g,h,b,1,u,s,a)}else{var _=a;a.width===h&&a.height===b||(_=c.canvas,c.canvas.width=h,c.canvas.height=b,c.drawImage(a,0,0,h,b)),e.texSubImage3D(f,m,0,0,y,h,b,1,u,s,_),_===c.canvas&&(c.canvas.width=0,c.canvas.height=0)}P(e,r),S(r)&&e.generateMipmap(f)}0===p&&n(d.length?d:void 0,t,l)}));var y})}function V(e,t,r,o){var a=(o=o||u.textureOptions).target||e.TEXTURE_2D;e.bindTexture(a,t);var c=o.width,f=o.height,l=o.depth,p=o.level||0,d=o.internalFormat||o.format||e.RGBA,m=y(d),h=o.format||m.format,v=o.type||_(e,r,m.type);if(s(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{var E=i.getTypedArrayTypeForGLType(v);r=new E(r)}var g,A=b(d,v),T=r.byteLength/A;if(T%1)throw"length wrong size for format: "+n.glEnumToString(e,h);if(a===e.TEXTURE_3D)if(c||f||l)!c||f&&l?!f||c&&l?(g=x(e,a,c,f,T/l),c=g.width,f=g.height):(g=x(e,a,c,l,T/f),c=g.width,l=g.height):(g=x(e,a,f,l,T/c),f=g.width,l=g.height);else{var O=Math.cbrt(T);if(O%1!=0)throw"can't guess cube size of array of numElements: "+T;c=O,f=O,l=O}else g=x(e,a,c,f,T),c=g.width,f=g.height;if(F(e),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment||1),R(e,o),a===e.TEXTURE_CUBE_MAP){var L=T/6*(A/r.BYTES_PER_ELEMENT);M(e,o).forEach(function(t){var n=L*t.ndx,i=r.subarray(n,n+L);e.texImage2D(t.face,p,d,c,f,0,h,v,i)})}else a===e.TEXTURE_3D?e.texImage3D(a,p,d,c,f,l,0,h,v,r):e.texImage2D(a,p,d,c,f,0,h,v,r);return P(e,o),w(e),{width:c,height:f,depth:l,type:v}}function H(e,t,r){var n=r.target||e.TEXTURE_2D;e.bindTexture(n,t);var i=r.level||0,o=r.internalFormat||r.format||e.RGBA,a=y(o),u=r.format||a.format,s=r.type||a.type;if(R(e,r),n===e.TEXTURE_CUBE_MAP)for(var c=0;c<6;++c)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+c,i,o,r.width,r.height,0,u,s,null);else n===e.TEXTURE_3D?e.texImage3D(n,i,o,r.width,r.height,r.depth,0,u,s,null):e.texImage2D(n,i,o,r.width,r.height,0,u,s,null);P(e,r)}function K(e,t,r){r=r||D,t=t||u.textureOptions;var n=e.createTexture(),i=t.target||e.TEXTURE_2D,o=t.width||1,a=t.height||1,c=t.internalFormat||e.RGBA,f=y(c),l=t.type||f.type;e.bindTexture(i,n),i===e.TEXTURE_CUBE_MAP&&(e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));var p=t.src;if(p)if("function"==typeof p&&(p=p(e,t)),"string"==typeof p)G(e,n,t,r);else if(s(p)||Array.isArray(p)&&("number"==typeof p[0]||Array.isArray(p[0])||s(p[0]))){var d=V(e,n,p,t);o=d.width,a=d.height,l=d.type}else if(Array.isArray(p)&&("string"==typeof p[0]||k(p[0])))i===e.TEXTURE_CUBE_MAP?Y(e,n,t,r):W(e,n,t,r);else{if(!k(p))throw"unsupported src type";j(e,n,p,t),o=p.width,a=p.height}else H(e,n,t);return S(t)&&C(e,n,t,o,a,c,l),L(e,n,t),n}},"./src/twgl-full.js":
/*!**************************!*\
  !*** ./src/twgl-full.js ***!
  \**************************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0;var n={m4:!0,v3:!0,primitives:!0};t.primitives=t.v3=t.m4=void 0;var i=s(r(/*! ./m4.js */"./src/m4.js"));t.m4=i;var o=s(r(/*! ./v3.js */"./src/v3.js"));t.v3=o;var a=s(r(/*! ./primitives.js */"./src/primitives.js"));t.primitives=a;var u=r(/*! ./twgl.js */"./src/twgl.js");function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=u[e]))})},"./src/twgl.js":
/*!*********************!*\
  !*** ./src/twgl.js ***!
  \*********************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0;var n={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0};t.addExtensionsToContext=v,t.getContext=function(e,t){return function(e,t){for(var r=["webgl2","webgl","experimental-webgl"],n=null,i=0;i<r.length;++i)if(n=e.getContext(r[i],t)){m.addExtensionsToContext&&v(n);break}return n}(e,t)},t.getWebGLContext=function(e,t){return function(e,t){for(var r=["webgl","experimental-webgl"],n=null,i=0;i<r.length;++i)if(n=e.getContext(r[i],t)){m.addExtensionsToContext&&v(n);break}return n}(e,t)},t.resizeCanvasToDisplaySize=function(e,t){t=t||1,t=Math.max(0,t);var r=e.clientWidth*t|0,n=e.clientHeight*t|0;return(e.width!==r||e.height!==n)&&(e.width=r,e.height=n,!0)},t.setDefaults=function(e){a.copyExistingProperties(e,m),i.setAttributeDefaults_(e),o.setTextureDefaults_(e)};var i=d(r(/*! ./attributes.js */"./src/attributes.js"));Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=i[e]))});var o=d(r(/*! ./textures.js */"./src/textures.js"));Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=o[e]))});var a=d(r(/*! ./helper.js */"./src/helper.js")),u=d(r(/*! ./utils.js */"./src/utils.js"));Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=u[e]))});var s=r(/*! ./draw.js */"./src/draw.js");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=s[e]))});var c=r(/*! ./framebuffers.js */"./src/framebuffers.js");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=c[e]))});var f=r(/*! ./programs.js */"./src/programs.js");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=f[e]))});var l=r(/*! ./typedarrays.js */"./src/typedarrays.js");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=l[e]))});var p=r(/*! ./vertex-arrays.js */"./src/vertex-arrays.js");function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=p[e]))});var m={addExtensionsToContext:!0},h=/^(.*?)_/;function b(e,t){u.glEnumToString(e,0);var r=e.getExtension(t);if(r){var n={},i=h.exec(t)[1],o="_"+i;for(var s in r){var c=r[s],f="function"==typeof c,l=f?i:o,p=s;s.endsWith(l)&&(p=s.substring(0,s.length-l.length)),void 0!==e[p]?f||e[p]===c||a.warn(p,e[p],c,s):f?e[p]=function(e){return function(){return e.apply(r,arguments)}}(c):(e[p]=c,n[p]=c)}n.constructor={name:r.constructor.name},u.glEnumToString(n,0)}return r}var y=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function v(e){for(var t=0;t<y.length;++t)b(e,y[t])}},"./src/typedarrays.js":
/*!****************************!*\
  !*** ./src/typedarrays.js ***!
  \****************************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0,t.getGLTypeForTypedArray=function(e){if(e instanceof Int8Array)return n;if(e instanceof Uint8Array)return i;if(e instanceof Uint8ClampedArray)return i;if(e instanceof Int16Array)return o;if(e instanceof Uint16Array)return a;if(e instanceof Int32Array)return u;if(e instanceof Uint32Array)return s;if(e instanceof Float32Array)return c;throw new Error("unsupported typed array type")},t.getGLTypeForTypedArrayType=function(e){if(e===Int8Array)return n;if(e===Uint8Array)return i;if(e===Uint8ClampedArray)return i;if(e===Int16Array)return o;if(e===Uint16Array)return a;if(e===Int32Array)return u;if(e===Uint32Array)return s;if(e===Float32Array)return c;throw new Error("unsupported typed array type")},t.getTypedArrayTypeForGLType=function(e){var t=f[e];if(!t)throw new Error("unknown gl type");return t},t.isArrayBuffer=void 0;var n=5120,i=5121,o=5122,a=5123,u=5124,s=5125,c=5126,f={},l=f;l[n]=Int8Array,l[i]=Uint8Array,l[o]=Int16Array,l[a]=Uint16Array,l[u]=Int32Array,l[s]=Uint32Array,l[c]=Float32Array,l[32819]=Uint16Array,l[32820]=Uint16Array,l[33635]=Uint16Array,l[5131]=Uint16Array,l[33640]=Uint32Array,l[35899]=Uint32Array,l[35902]=Uint32Array,l[36269]=Uint32Array,l[34042]=Uint32Array;var p="undefined"!=typeof SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};t.isArrayBuffer=p},"./src/utils.js":
/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0,t.isWebGL1=function(e){return!e.texStorage2D},t.isWebGL2=function(e){return!!e.texStorage2D},t.glEnumToString=void 0;var n,i,o=(n={},i={},function(e,t){return function(e){var t=e.constructor.name;if(!n[t]){for(var r in e)if("number"==typeof e[r]){var o=i[e[r]];i[e[r]]=o?"".concat(o," | ").concat(r):r}n[t]=!0}}(e),i[t]||"0x"+t.toString(16)});t.glEnumToString=o},"./src/v3.js":
/*!*******************!*\
  !*** ./src/v3.js ***!
  \*******************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0,t.add=function(e,t,r){return(r=r||new n(3))[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r},t.copy=function(e,t){return(t=t||new n(3))[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.create=function(e,t,r){var i=new n(3);return e&&(i[0]=e),t&&(i[1]=t),r&&(i[2]=r),i},t.cross=function(e,t,r){r=r||new n(3);var i=e[2]*t[0]-e[0]*t[2],o=e[0]*t[1]-e[1]*t[0];return r[0]=e[1]*t[2]-e[2]*t[1],r[1]=i,r[2]=o,r},t.distance=function(e,t){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)},t.distanceSq=function(e,t){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i},t.divide=function(e,t,r){return(r=r||new n(3))[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r},t.divScalar=function(e,t,r){return(r=r||new n(3))[0]=e[0]/t,r[1]=e[1]/t,r[2]=e[2]/t,r},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},t.lerp=function(e,t,r,i){return(i=i||new n(3))[0]=e[0]+r*(t[0]-e[0]),i[1]=e[1]+r*(t[1]-e[1]),i[2]=e[2]+r*(t[2]-e[2]),i},t.lerpV=function(e,t,r,i){return(i=i||new n(3))[0]=e[0]+r[0]*(t[0]-e[0]),i[1]=e[1]+r[1]*(t[1]-e[1]),i[2]=e[2]+r[2]*(t[2]-e[2]),i},t.length=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},t.lengthSq=function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},t.max=function(e,t,r){return(r=r||new n(3))[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r},t.min=function(e,t,r){return(r=r||new n(3))[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r},t.mulScalar=function(e,t,r){return(r=r||new n(3))[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r},t.multiply=function(e,t,r){return(r=r||new n(3))[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r},t.negate=function(e,t){return(t=t||new n(3))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},t.normalize=function(e,t){t=t||new n(3);var r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=Math.sqrt(r);return i>1e-5?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=0,t[1]=0,t[2]=0),t},t.setDefaultType=function(e){var t=n;return n=e,t},t.subtract=function(e,t,r){return(r=r||new n(3))[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r};var n=Float32Array},"./src/vertex-arrays.js":
/*!******************************!*\
  !*** ./src/vertex-arrays.js ***!
  \******************************/
/*! no static exports found */function(e,t,r){"use strict";t.__esModule=!0,t.createVertexArrayInfo=function(e,t,r){var i=e.createVertexArray();return e.bindVertexArray(i),t.length||(t=[t]),t.forEach(function(t){n.setBuffersAndAttributes(e,t,r)}),e.bindVertexArray(null),{numElements:r.numElements,elementType:r.elementType,vertexArrayObject:i}},t.createVAOAndSetAttributes=i,t.createVAOFromBufferInfo=function(e,t,r){return i(e,t.attribSetters||t,r.attribs,r.indices)};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(/*! ./programs.js */"./src/programs.js"));function i(e,t,r,i){var o=e.createVertexArray();return e.bindVertexArray(o),n.setAttributes(t,r),i&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i),e.bindVertexArray(null),o}}})},e.exports=n()},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var i=(a=n,u=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(u),"/*# ".concat(s," */")),o=n.sources.map(function(e){return"/*# sourceURL=".concat(n.sourceRoot).concat(e," */")});return[r].concat(o).concat([i]).join("\n")}var a,u,s;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(r,"}"):r}).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(n[o]=!0)}for(var a=0;a<e.length;a++){var u=e[a];null!=u[0]&&n[u[0]]||(r&&!u[2]?u[2]=r:r&&(u[2]="(".concat(u[2],") and (").concat(r,")")),t.push(u))}},t}},function(e,t,r){"use strict";var n,i={},o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},a=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}();function u(e,t){for(var r=[],n={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],u={css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(u):r.push(n[a]={id:a,parts:[u]})}return r}function s(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=i[n.id],a=0;if(o){for(o.refs++;a<o.parts.length;a++)o.parts[a](n.parts[a]);for(;a<n.parts.length;a++)o.parts.push(h(n.parts[a],t))}else{for(var u=[];a<n.parts.length;a++)u.push(h(n.parts[a],t));i[n.id]={id:n.id,refs:1,parts:u}}}}function c(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var n=r.nc;n&&(e.attributes.nonce=n)}if(Object.keys(e.attributes).forEach(function(r){t.setAttribute(r,e.attributes[r])}),"function"==typeof e.insert)e.insert(t);else{var i=a(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var f,l=(f=[],function(e,t){return f[e]=t,f.filter(Boolean).join("\n")});function p(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=l(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}var d=null,m=0;function h(e,t){var r,n,i;if(t.singleton){var o=m++;r=d||(d=c(t)),n=p.bind(null,r,o,!1),i=p.bind(null,r,o,!0)}else r=c(t),n=function(e,t,r){var n=r.css,i=r.media,o=r.sourceMap;if(i&&e.setAttribute("media",i),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,r,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o());var r=u(e,t);return s(r,t),function(e){for(var n=[],o=0;o<r.length;o++){var a=r[o],c=i[a.id];c&&(c.refs--,n.push(c))}e&&s(u(e,t),t);for(var f=0;f<n.length;f++){var l=n[f];if(0===l.refs){for(var p=0;p<l.parts.length;p++)l.parts[p]();delete i[l.id]}}}}},function(e,t,r){var n=r(4);"string"==typeof n&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(2)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(1)(!1)).push([e.i,"body {\n  padding: 200px;\n}\n#textbox-1 {\n  background-color: transparent;\n  width: calc( 100vw - 600px);\n  height: calc(100px);\n  cursor: text;\n}\n\n.menu-bar {\n  width: 100vw;\n  height: 60px;\n  background-color: pink;\n}\n\n.contents-box {\n  position: relative;\n  width: 100vw;\n  height: calc( 100vh - 60px);\n}\n\n.editor-box {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 600px;\n  height: 100%;\n  background-color: springgreen;\n\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n}\n\n\n.button {\n  font-size: 30px;\n  background-color: aquamarine;\n  cursor: pointer;\n}\n\ncanvas {\n  z-index: -1;\n}",""])},function(e,t,r){var n=r(6);"string"==typeof n&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(2)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(1)(!1)).push([e.i,"/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}",""])},function(e,t,r){"use strict";r.r(t);var n=r(0);function i(e,t){return e.find(function(e){return e.name===t.style.font}).glyphs[t.letter]}function o(e,t){var r=document.getElementById(e.id).getBoundingClientRect(),n=r.width,o=r.height,a=100-2*e.paddingX,u=o/n*100-2*e.paddingY,s=0;e.lineList.forEach(function(e,r,n){var o=0,u=0,c=0,f=0;e.charList.forEach(function(r,n){r.position={sublineIndex:u,sublineY:s,charWidth:r.letter?r.style.size/i(t,r).ratio:0,charHeight:r.style.size,charX:o,charY:s},o+=r.position.charWidth+r.position.charWidth*r.style.tracking,c<r.position.charHeight&&(c=r.position.charHeight),f<r.position.charHeight*r.style.leading&&(f=r.position.charHeight*r.style.leading);var l=e.charList[n+1];if(e.wrapLine&&l){var p=l.style.size/i(t,l).ratio;if(console.log("nextCharWidth"),o+p>a)e.charList.filter(function(e){return e.position&&e.position.sublineIndex===u}).forEach(function(e){e.position.sublineHeight=c}),s+=f,o=f=0,c=0,u++}}),e.charList.filter(function(e){return e.position&&e.position.sublineIndex===u}).forEach(function(e){e.position.sublineHeight=c});var l=e.charList[e.charList.length-1],p=l.position.charX+l.position.charWidth;p>a?(e.charList.forEach(function(e,t,r){e.position.charX*=a/p,e.position.charWidth*=a/p,e.position.charHeight*=a/p,e.position.sublineHeight*=a/p}),f*=a/p):e.charList.forEach(function(t,r){var n=e.charList[r+1];if(n&&t.position.sublineIndex!==n.position.sublineIndex||!n){var i=t.position.sublineIndex,o=t.position.charX+t.position.charWidth;console.log(o,a);var u=a-o,s=e.charList.filter(function(e){return e.position.sublineIndex===i});switch(e.horizontalAlign){case"LEFT":break;case"CENTER":s.forEach(function(e){e.position.charX+=u/2});break;case"RIGHT":s.forEach(function(e){e.position.charX+=u});break;case"SPREAD":var c=s.length-1?u/(s.length-1):0;s.forEach(function(e,t){e.position.charX+=c*t})}}}),s+=f,u=0});var c=e.lineList[e.lineList.length-1],f=c.charList[c.charList.length-1],l=f.position.sublineY+f.position.sublineHeight;if(u>l){var p=u-l;e.lineList.forEach(function(t,r){switch(e.verticalAlign){case"TOP":break;case"CENTER":t.charList.forEach(function(e){e.position.charY+=p/2,e.position.sublineY+=p/2});break;case"BOTTOM":t.charList.forEach(function(e){e.position.charY+=p,e.position.sublineY+=p});break;case"SPREAD":var n=e.lineList.length-1?p/(e.lineList.length-1):0;t.charList.forEach(function(e){e.position.charY+=n*r,e.position.sublineY+=n*r})}})}else{var d=(l+2*e.paddingY)/100*n;document.getElementById(e.id).style.height=d+"px"}e.lineList.forEach(function(t,r,n){t.charList.forEach(function(t,r,n){t.position.charX+=e.paddingX,t.position.charY+=e.paddingY,t.position.sublineY+=e.paddingY})})}function a(e,t,r){var o=document.getElementById(t.id).getBoundingClientRect(),a=o.width,u=o.height;t.lineList.forEach(function(t,o,s){t.charList.forEach(function(t){var o=t.position.charWidth/100*a,s=t.position.charHeight/100*a,c=t.position.charX/100*a,f=t.position.charY/100*a;i(r,t);t.renderInfo={bufferInfo:n.primitives.createPlaneBufferInfo(e,o,s,1,1,n.m4.multiply(n.m4.translation(n.v3.create(c+o/2,f+s/2,0)),n.m4.rotationX(Math.PI/2))),uniforms:{u_matrix:n.m4.ortho(0,a,u,0,400,-400),u_rand:n.v3.create(Math.random(),Math.random(),Math.random())}}})})}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach(function(t){c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t,r){!function(e,t){e.style.width=t+"px"}(e,t),function(e,t){e.style.height=t+"px"}(e,r)}var l="attribute vec4 a_position;\n \nuniform mat4 u_matrix;\n\nvoid main() {\n  // Multiply the position by the matrix.\n  // gl_Position =  u_matrix * a_position;\n  gl_Position =  u_matrix * a_position;\n}",p="#extension GL_OES_standard_derivatives : enable\n  \nprecision highp float;\n// uniform sampler2D texture;\nvarying vec2 coord;\n\nuniform float u_dTime;\n\n\nvoid main() {\n  \n  gl_FragColor = vec4(1. , 1., 1., abs(cos(u_dTime/400.)* 1.2));\n}",d=function(){var e={textboxList:[],fontList:[],mouseX:null,mouseY:null,mousePressed:!1,shiftPressed:!1,pixelRatio:1.5},t=document.createElement("canvas");this.setContainer=function(e){!function(e,t){if(t===window)f(e,window.innerWidth,window.innerHeight),e.style.position="fixed",document.body.appendChild(e);else{var r=t.getBoundingClientRect();f(e,r.width,r.height),e.style.position="absolute",t.appendChild(e)}e.style.top="0px",e.style.left="0px"}(t,e)};var r=function(e){var t,r={antialias:!0,alpha:!0,depth:!0,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1};try{t=e.getContext("experimental-webgl",r)}catch(e){}try{t=t||e.getContext("webgl",r)}catch(e){}return t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.enable(t.BLEND),t}(t);function u(t){n.resizeCanvasToDisplaySize(r.canvas,e.pixelRatio),r.enable(r.DEPTH_TEST),r.disable(r.SCISSOR_TEST),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),e.textboxList.forEach(function(t){if(function(e,t,r){var n=document.getElementById(t.id);if(!n)return!1;var i=function(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect();return{left:r.left-n.left,right:r.right-n.left,top:r.top-n.top,bottom:r.bottom-n.top}}(n,e.canvas);if(i.bottom<0||i.top>e.canvas.clientHeight||i.right<0||i.left>e.canvas.clientWidth)return!1;var o=(i.right-i.left)*r,a=(i.bottom-i.top)*r,u=i.left*r,s=(e.canvas.clientHeight-i.bottom)*r;return e.enable(e.SCISSOR_TEST),e.viewport(u,s,o,a),e.scissor(u,s,o,a),!0}(r,t,e.pixelRatio)&&(r.clearColor(1,0,.6,1),r.clear(r.COLOR_BUFFER_BIT),t.lineList.forEach(function(t){t.charList.forEach(function(t){if(t.letter){var o=i(e.fontList,t).programInfo;r.useProgram(o.program),n.setBuffersAndAttributes(r,o,t.renderInfo.bufferInfo),n.setUniforms(o,t.renderInfo.uniforms),n.drawBufferInfo(r,t.renderInfo.bufferInfo)}})}),t.cursor)){var o,a=document.getElementById(t.id).getBoundingClientRect(),u=a.width,s=a.height,c=t.lineList[t.cursor.iLine],f=c.charList[0],d=c.charList[t.cursor.iChar-1];if(d){var m=d.position.charHeight/100*u,h=(d.position.charX+d.position.charWidth*(1+d.style.tracking))/100*u,b=d.position.charY/100*u;o=n.primitives.createPlaneBufferInfo(r,3,1.1*m,1,1,n.m4.multiply(n.m4.translation(n.v3.create(h,b+m/2,-.001)),n.m4.rotationX(Math.PI/2)))}else{var y=f.position.charHeight/100*u,v=f.position.charX/100*u,E=f.position.charY/100*u;o=n.primitives.createPlaneBufferInfo(r,3,1.1*y,1,1,n.m4.multiply(n.m4.translation(n.v3.create(v,E+y/2,-.001)),n.m4.rotationX(Math.PI/2)))}var g=n.createProgramInfo(r,[l,p]),_=new Date,x={u_matrix:n.m4.ortho(0,u,s,0,400,-400),u_dTime:_.getTime()-t.cursor.clickTime};r.useProgram(g.program),n.setBuffersAndAttributes(r,g,o),n.setUniforms(g,x),n.drawBufferInfo(r,o)}}),requestAnimationFrame(u)}r?(n.setDefaults({attribPrefix:"a_"}),r.getExtension("OES_standard_derivatives"),n.resizeCanvasToDisplaySize(t,e.pixelRatio),this.feedData=function(t,i){e.textboxList=t,e.fontList=i,e.fontList.forEach(function(e){Object.keys(e.glyphs).forEach(function(t){var i=e.glyphs[t];i.programInfo||(i.programInfo=n.createProgramInfo(r,[i.vert,i.frag]))})}),e.textboxList.forEach(function(t){o(t,e.fontList),a(r,t,e.fontList)}),e.textboxList.forEach(function(e){var t=document.getElementById(e.id),r=t.getBoundingClientRect();t.addEventListener("mousedown",function(t){var n=t.offsetX/r.width*100,i=t.offsetY/r.width*100;console.log(n,i);var o={iLine:0,iChar:0};e.lineList.some(function(e,t){var r=0;e.charList.some(function(e,t){return i<e.position.sublineY+e.position.sublineHeight&&(r=e.position.sublineIndex,!0)});var a=e.charList[e.charList.length-1].position.sublineY+e.charList[e.charList.length-1].position.sublineHeight;return!!(i<a)&&(Object.assign(o,{iLine:t}),e.charList.some(function(t,a){return i<t.position.sublineY+t.position.sublineHeight&&n<t.position.charX+t.position.charWidth*(1+t.style.tracking)/2?(Object.assign(o,{iChar:a}),!0):(Object.assign(o,{iChar:a}),r<t.position.sublineIndex||(a===e.charList.length-1&&Object.assign(o,{iChar:a+1}),!1))}),!0)});var a=new Date;Object.assign(o,{clickTime:a.getTime()}),console.log(o),Object.assign(e,{cursor:o})})}),function(e,t,r){window.addEventListener("keydown",function(n){t.forEach(function(t){if(t.cursor){var i,u=t.cursor;if("Enter"===n.key){var c=t.lineList[u.iLine],f=s({},c),l=c.charList[u.iChar-1],p=c.charList[u.iChar],d=c.charList.splice(u.iChar);if(d.length>0)f.charList=d;else{var m={letter:null,style:s({},l.style)};f.charList=[m]}if(0===u.iChar){var h={letter:null,style:s({},p.style)};c.charList.push(h)}t.lineList.splice(u.iLine+1,0,f),u.iLine++,u.iChar=0}else if("Backspace"===n.key){var b=t.lineList[u.iLine-1],y=t.lineList[u.iLine],v=t.lineList[u.iLine].charList[u.iChar-1];if(v&&null!==v.letter){u.iChar--;var E=y.charList.splice(u.iChar,1)[0];if(0===y.charList.length){var g={letter:null,style:s({},E.style)};y.charList.push(g)}}else{if(!b)return;null===y.charList[0].letter?y.charList.splice(0,1):null===b.charList[0].letter&&b.charList.splice(0,1);var _=b.charList.concat(y.charList);t.lineList.splice(u.iLine,1),u.iLine--,u.iChar=t.lineList[u.iLine].charList.length,t.lineList[u.iLine].charList=_}}else if(i=n.key,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890.,:;!?/@#$%&()".includes(i)){var x,A=t.lineList[u.iLine].charList[u.iChar-1],T=t.lineList[u.iLine].charList[u.iChar];x=A?Object.assign({},A.style):Object.assign({},T.style),(A&&null===A.letter||T&&null===T.letter)&&(t.lineList[u.iLine].charList.splice(0,1),u.iChar=0),t.lineList[u.iLine].charList.splice(u.iChar,0,{letter:"B",style:x}),u.iChar++}o(t,r),a(e,t,r)}})})}(r,e.textboxList,e.fontList)},this.start=function(){requestAnimationFrame(u)},this.setButtons=function(){var t=["vertical-top","vertical-center","vertical-bottom","vertical-spread","horizontal-left","horizontal-center","horizontal-right","horizontal-spread","wrapLine"];e.textboxList.forEach(function(n){t.forEach(function(t){var i=document.getElementById("".concat(n.id,"-").concat(t));if(i)if(t.includes("vertical")){var u=t.split("-")[1].toUpperCase();i.addEventListener("mousedown",function(e,t,r,n){return function(){r.verticalAlign=n,o(r,t),a(e,r,t)}}(r,e.fontList,n,u))}else if(t.includes("horizontal")){var s=t.split("-")[1].toUpperCase();i.addEventListener("mousedown",function(e,t,r,n){return function(){r.cursor&&(r.lineList[r.cursor.iLine].horizontalAlign=n,o(r,t),a(e,r,t))}}(r,e.fontList,n,s))}else t.includes("wrapLine")&&i.addEventListener("mousedown",function(e,t,r){return function(){r.cursor&&(r.lineList[r.cursor.iLine].wrapLine=!r.lineList[r.cursor.iLine].wrapLine,o(r,t),a(e,r,t))}}(r,e.fontList,n))})})},this.setCursor=function(){}):document.write("No WebGL support. Please use a modern browser.")},m=(r(3),r(5),[{id:"textbox-1",isEditable:!0,verticalAlign:"BOTTOM",paddingX:5,paddingY:5,cursor:null,lineList:[{inlineAlign:"TOP",horizontalAlign:"LEFT",wrapLine:!1,charList:[{letter:"A",style:{font:"defaultFont",size:30,leading:1.2,tracking:0}},{letter:"A",style:{font:"defaultFont",size:20,leading:1.2,tracking:0}},{letter:"A",style:{font:"defaultFont",size:20,leading:1.2,tracking:0}}]}]}]),h="attribute vec4 a_position;\n \nuniform mat4 u_matrix;\nuniform vec3 u_rand;\n\nvoid main() {\n  // Multiply the position by the matrix.\n  // gl_Position =  u_matrix * a_position;\n  gl_Position =  u_matrix * a_position;\n}",b="#extension GL_OES_standard_derivatives : enable\n  \nprecision highp float;\n// uniform sampler2D texture;\n// varying vec2 coord;\n\n// uniform float time;\n\nuniform vec3 u_rand;\n\nvoid main() {\n  \n  gl_FragColor = vec4(u_rand, 1.);\n}",y=[{name:"defaultFont",glyphs:{A:{ratio:1.5,vert:h,frag:b,texture:"",textureCoords:{x:0,y:0,width:400,height:600}},B:{ratio:1.5,vert:h,frag:b,texture:"",textureCoords:{x:0,y:0,width:400,height:600}}}}],v=new d;v.setContainer(document.getElementById("textbox-1")),v.setContainer(window),v.feedData(m,y),v.setButtons(),v.start()}]);
//# sourceMappingURL=bundle.js.map